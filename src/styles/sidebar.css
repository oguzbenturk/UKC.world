/* Sidebar styling for Plannivo application */

/* Main sidebar container */
.sidebar {
  @apply fixed inset-y-0 left-0 z-40 bg-gradient-to-br from-slate-900 to-slate-800 text-white flex flex-col transform transition-all duration-300 ease-in-out shadow-xl border-r border-slate-700/40;
  width: 240px; /* Default expanded width */
  flex-shrink: 0; /* Prevent sidebar from shrinking */
  /* Prefer dynamic viewport height to avoid keyboard/URL bar issues */
  height: 100vh; /* fallback */
  height: 100dvh; /* Ensure full height on desktop/mobile */
  overflow: hidden; /* Prevent main container scroll, let nav handle it */
}

/* Collapsed sidebar */
.sidebar.collapsed {
  width: 64px; /* Width when collapsed */
}

/* Mobile/Tablet sidebar (hidden by default on screens < 1200px) */
@media (max-width: 1199px) {
  .sidebar {
    transform: translateX(-100%);
    top: 4rem; /* Start below navbar (navbar height is 4rem/64px) */
  /* Use dvh for correct height when browser UI/keyboard is visible */
  height: calc(100vh - 4rem); /* fallback */
  height: calc(100dvh - 4rem); /* Full height minus navbar height */
  max-height: calc(100vh - 4rem); /* fallback */
  max-height: calc(100dvh - 4rem);
    display: flex;
    flex-direction: column;
    z-index: 60; /* Higher than navbar's z-50 */
  }
  
  .sidebar.open {
    transform: translateX(0);
  }
  
  /* Ensure nav takes full available height and scrolls properly */
  .sidebar nav {
    flex: 1;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
    scrollbar-width: auto; /* Firefox - show scrollbar */
  scrollbar-color: #475569 #1e293b; /* Firefox - thumb and track colors */
    max-height: 100%; /* Use full available container height */
  }
  
  /* Webkit scrollbar styling for mobile - make it more visible */
  .sidebar nav::-webkit-scrollbar {
    width: 8px;
    background-color: #1e293b;
  }
  
  .sidebar nav::-webkit-scrollbar-track {
    background: #1e293b;
    border-radius: 4px;
  }
  
  .sidebar nav::-webkit-scrollbar-thumb {
    background-color: #475569;
    border-radius: 4px;
    border: 1px solid #334155;
  }
  
  .sidebar nav::-webkit-scrollbar-thumb:hover {
    background-color: #64748b;
  }
  
  .sidebar nav::-webkit-scrollbar-thumb:active {
    background-color: #94a3b8;
  }
}

/* Desktop sidebar (always visible on screens â‰¥ 1200px) */
@media (min-width: 1200px) {
  .sidebar {
    position: sticky;
    top: 0;
  height: 100vh; /* fallback */
  height: 100dvh;
    transform: translateX(0);
  }
}

/* Content container that adjusts to sidebar state */
.content-container {
  @apply flex-1 bg-slate-100 transition-all duration-300;
  width: calc(100% - 240px); /* Default with expanded sidebar */
  height: calc(100vh - 4rem); /* fallback */
  height: calc(100dvh - 4rem); /* Full height minus navbar */
  overflow-y: auto;
  overflow-x: hidden;
}

/* Content width adjustment when sidebar is collapsed */
.sidebar.collapsed + .content-container {
  width: calc(100% - 64px);
}

/* Full width on mobile/tablet when sidebar is hidden */
@media (max-width: 1199px) {
  .content-container {
    width: 100%;
  }
}

/* Navbar toggle icon animation */
.toggle-icon {
  @apply transition-transform duration-300;
}

.toggle-icon.collapsed {
  @apply rotate-180;
}

/* Theme overrides */
body[data-theme='light'] .sidebar {
  background-image: none;
  background-color: #ffffff;
  color: #1e293b;
  box-shadow: 0 15px 35px rgba(15, 23, 42, 0.08);
  border-right-color: rgba(148, 163, 184, 0.35);
}

body[data-theme='dark'] .sidebar {
  background-image: linear-gradient(130deg, #0f172a, #1e293b 55%, #0b1220);
  color: #f8fafc;
  border-right-color: rgba(71, 85, 105, 0.65);
}

